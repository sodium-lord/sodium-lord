<!DOCTYPE html">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Salt Mines</title>
<!--<meta http-equiv="Content-Security-Policy" content="font-src 'self' data:; img-src 'self' data:; default-src 'self' https://sodium-lord.github.io"> --> 
<style type="text/css">

</style>
<link rel="stylesheet" type="text/css" href="css/mp3-player-button.css" />
<script type="text/javascript" src="script/soundmanager2.js"></script>
<script type="text/javascript" src="script/mp3-player-button.js"></script>

</head>

<body>

<h1> 	
	Command Previews
</h1>
<h4>
	Warning: Might be super loud
</h4>

<ul id ="sounds">
	
</ul>

</div>
<script>
soundManager.setup({
  // required: path to directory containing SM2 SWF files
  url: 'swf/',
});
soundManager.onready(function(){
	console.log("ready"); 
	soundManager.setVolume(20);
})

var list = document.getElementById("sounds"); 
fetch('files')
  .then(response => response.text())
  .then(text => {
	  var lines = text.split("\n");
	  
	  lines.forEach(function(line){
	  	var fileName = line;
		var commandName = line.replace("Resources\\", "!").replace(".mp3", "");		
		var listItem = document.createElement('li');
		var para = document.createElement('p');		
		var link = document.createElement('a');
		
		link.setAttribute("class", "sm2_button"); 
		link.href = fileName; 
		var linkText = document.createTextNode(commandName);
				
		para.textContent = ' ' + commandName;
		para.prepend(link);
		link.appendChild(linkText);		
		listItem.appendChild(para); 
		list.appendChild(listItem);
	  });
  });
</script>
</body>
</html>
